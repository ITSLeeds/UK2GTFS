<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TransXchange - Bus, Tram, and Tube Timetables • UK2GTFS</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="TransXchange - Bus, Tram, and Tube Timetables">
<meta property="og:description" content="UK2GTFS">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">UK2GTFS</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/ATOC.html">ATOC - Train Timetables</a>
    </li>
    <li>
      <a href="../articles/GTFS.html">GTFS Functions</a>
    </li>
    <li>
      <a href="../articles/transxchange.html">TransXchange - Bus, Tram, and Tube Timetables</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/itsleeds/uk2gtfs/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="transxchange_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>TransXchange - Bus, Tram, and Tube Timetables</h1>
                        <h4 class="author">Malcolm Morgan</h4>
            
            <h4 class="date">2021-11-16</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/itsleeds/uk2gtfs/blob/master/vignettes/transxchange.Rmd"><code>vignettes/transxchange.Rmd</code></a></small>
      <div class="hidden name"><code>transxchange.Rmd</code></div>

    </div>

    
    
<p>This vignette outlines how to produce GTFS timetables for buses and light rail network using TransXchange files.</p>
<p>Note that GTFS data is now published for buses in Great Britain at <a href="https://data.bus-data.dft.gov.uk/timetable/download/">Open Bus Data</a>. UK2GTFS benefits from additional data checks and also including non-bus modes such as tram, underground, and boats.</p>
<div id="transxchange-data---for-bus-tram-and-metro" class="section level2">
<h2 class="hasAnchor">
<a href="#transxchange-data---for-bus-tram-and-metro" class="anchor"></a>TransXchange Data - for bus, tram, and metro</h2>
<p>TransXchange data can be downloaded from <a href="https://www.travelinedata.org.uk/traveline-open-data/data-reporting/">Traveline</a> you will need to apply for free access to the FTP sever to download the data.</p>
<p>The data comes as zipped folders for different regions of Great Britain.</p>
</div>
<div id="converting-transxchange-to-gtfs" class="section level2">
<h2 class="hasAnchor">
<a href="#converting-transxchange-to-gtfs" class="anchor"></a>Converting TransXchange to GTFS</h2>
<p>To do a simple conversion to GTFS, load the package, and use the <code><a href="../reference/transxchange2gtfs.html">transxchange2gtfs()</a></code> function. The function requires the following arguments.</p>
<ul>
<li>
<code>path_in</code> is the file path to either a single zip folder or many XML files</li>
<li>
<code>ncores</code> If &gt; 1 then multicore processing is used to speed up the processing. Always leave one spare core for your OS.</li>
<li>
<code>try_mode</code> if TRUE file that can’t be converted are skipped</li>
</ul>
<p>A simple example is shown below:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/itsleeds/uk2gtfs">UK2GTFS</a></span><span class="op">)</span>
<span class="va">path_in</span> <span class="op">&lt;-</span> <span class="st">"EA.zip"</span>
<span class="va">gtfs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/transxchange2gtfs.html">transxchange2gtfs</a></span><span class="op">(</span>path_in <span class="op">=</span> <span class="va">path_in</span>,
          ncores <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></code></pre></div>
<p>Once the conversion has been completed, you can save the GTFS file.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/gtfs_write.html">gtfs_write</a></span><span class="op">(</span><span class="va">gtfs</span>, 
           folder <span class="op">=</span> <span class="st">"C:/GTFS"</span>,
           name <span class="op">=</span> <span class="st">"gtfs_EA"</span><span class="op">)</span></code></pre></div>
<p>This will save the GTFS file to <code>C:/GTFS/gtfs_EA.zip</code></p>
</div>
<div id="merging-problems" class="section level2">
<h2 class="hasAnchor">
<a href="#merging-problems" class="anchor"></a>Merging problems</h2>
<p><code>transxchange2gtfs</code> converts each transXchange file into its own GTFS file. Then uses <code>gtfs_merge</code> to combine these into a single GTFS file. When this is done checks are performed to make sure the merged GTFS is valid. However this can fail. Often due to small differences between files such as the Bus operator having two spellings of their company name (e.g.<br>
“Yorkshire Coastliner Ltd” or “Yorkshire Coastliner” ).</p>
<p>If <code>transxchange2gtfs</code> is unable to merge it will return a list of GTFS objects. You can then manually merge using <code>gtfs_merge</code> and <code>force = TRUE</code> this is almost always ok.</p>
</div>
<div id="stop-locations---the-naptan" class="section level2">
<h2 class="hasAnchor">
<a href="#stop-locations---the-naptan" class="anchor"></a>Stop Locations - The NaPTAN</h2>
<p>TransXchange files do not contain the location of stops, so we must look them up in the NaPATAN. The NaPTAN is updated regularly so UK2GTFS will always download the latest copy using <code><a href="../reference/get_naptan.html">get_naptan()</a></code>. However the NaPTAN is not perfect, it misses some stops and has incorrect locations for others. UK2GTFS uses two internal files <code>naptan_missing</code> and <code>naptan_replace</code> to improve the NaPTAN.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Malcolm Morgan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
